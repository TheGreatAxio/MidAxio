<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Forgot Password - MidAxio</title>
    <link rel="stylesheet" href="/css/style.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1913229720945156" crossorigin="anonymous"></script>
</head>
<body>
<nav class="global-nav"></nav>
<aside class="side-sidebar"></aside>

<main class="main-container">
    <div class="auth-container">
        <h1>Reset Password</h1>
        <p>Enter your email to receive a reset link.</p>
        <form id="forgotForm">
            <input type="email" id="resetEmail" placeholder="Email Address" required>
            <button type="submit" class="btn">Send Reset Link</button>
        </form>
        <div id="resetMessage" style="margin-top: 15px;"></div>
        <div style="margin-top: 20px;">
            <a href="/login" style="color: #4169e1; text-decoration: none;">Back to Login</a>
        </div>
    </div>
</main>

<footer class="ad-footer"></footer>

<script src="/js/script.js"></script>
<script>
    document.getElementById('forgotForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('resetEmail').value;
        const msg = document.getElementById('resetMessage');

        try {
            const response = await fetch('https://api.axioscomputers.com/api/v1/auth/forgot-password', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email: email })
            });

            if (response.ok) {
                msg.style.color = "lightgreen";
                msg.innerText = "If an account exists, a reset link has been sent.";
            } else {
                msg.style.color = "red";
                msg.innerText = "Error sending link.";
            }
        } catch (error) {
            msg.innerText = "Error connecting to server.";
        }
    });
</script>
</body>
</html>